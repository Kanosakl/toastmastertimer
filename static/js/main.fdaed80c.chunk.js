(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){e.exports=n(178)},108:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(6),o=n.n(r),l=(n(108),n(17)),s=n(21),m=n(23),c=n(22),u=n(7),d=n(24),h=n(183),p=n(182),v=(n(38),n(180)),b=(n(39),n(53)),T=n.n(b),f=n(101),g=n(89),C=n.n(g),k=null,y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={time:0,start:0,isRunning:!1,colorBox:null,startTime:null,endTime:null,greenTime:null,redTime:null},n.onStartTimer=n.onStartTimer.bind(Object(u.a)(n)),n.onStopTimer=n.onStopTimer.bind(Object(u.a)(n)),n.onResetTimer=n.onResetTimer.bind(Object(u.a)(n)),n.noSleepEnable=n.noSleepEnable.bind(Object(u.a)(n)),n.noSleepDisable=n.noSleepDisable.bind(Object(u.a)(n)),n.greenAlert=null,n.yellowAlert=null,n.redAlert=null,n.vibrateTime=3e4,n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onStartTimer",value:function(){var e=this;this.noSleepEnable(),this.setState({time:this.state.time,start:Date.now()-this.state.time,isRunning:!0,startTime:new Date}),this.timerTick=setInterval(function(){return e.setState({time:Date.now()-e.state.start})},1e3),this.greenAlert=setTimeout(function(){e.vibrate(2e3),e.setColor("green")},this.props.greenTime),this.yellowAlert=setTimeout(function(){e.vibrate(2e3),e.setColor("yellow")},this.props.yellowTime),this.redAlert=setTimeout(function(){e.vibrate(2e3),e.alertLoop(),e.setColor("red")},this.props.redTime)}},{key:"alertLoop",value:function(){var e=this;this.intervalVibrate=setInterval(function(){return e.vibrate(2e3)},this.vibrateTime)}},{key:"onStopTimer",value:function(){this.setState({isRunning:!1,endTime:Date.now(),greenTime:this.props.greenTime,redTime:this.props.redTime}),clearInterval(this.timerTick),clearInterval(this.intervalVibrate),clearTimeout(this.greenAlert),clearTimeout(this.yellowAlert),clearTimeout(this.redAlert),this.noSleepDisable()}},{key:"onResetTimer",value:function(){this.setState({time:0,greenTime:null,redTime:null}),this.setColor(null)}},{key:"vibrate",value:function(e){navigator.vibrate?navigator.vibrate(e):console.log("vibrating for ".concat(e,"ms"))}},{key:"setColor",value:function(e){this.setState({colorBox:e})}},{key:"noSleepEnable",value:function(){k&&k.disable(),(k=new C.a).enable()}},{key:"noSleepDisable",value:function(){k.disable()}},{key:"render",value:function(){var e=Object(f.a)("%H : %M"),t={height:"250px",backgroundColor:this.state.colorBox,display:"flex"},n={height:"110px",width:"100%",bottom:"30px",position:"absolute"};this.state.colorBox&&(t.backgroundColor=this.state.colorBox);var i=0===this.state.time?a.a.createElement(v.a,{style:n,onClick:this.onStartTimer},"start"):null,r=this.state.isRunning?a.a.createElement(v.a,{style:n,onClick:this.onStopTimer},"stop"):null,o=0===this.state.time||this.state.isRunning?null:a.a.createElement(v.a,{style:n,onClick:this.onResetTimer},"reset"),l=0===this.state.time||this.state.isRunning?null:a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("span",null,"Start Time: ",e(this.state.startTime))),a.a.createElement("div",null,a.a.createElement("span",null,"End Time: ",e(this.state.endTime)))),s=this.state.greenTime||this.props.greenTime,m=0!==this.state.time&&!this.state.isRunning&&this.state.time<s?a.a.createElement("span",null,"UnderTime: ",T()(s-this.state.time).format("mm m ss s")):null,c=this.state.redTime||this.props.redTime,u=0!==this.state.time&&!this.state.isRunning&&this.state.time>c?a.a.createElement("span",null,"OverTime: ",T()(this.state.time-c).format("mm m ss s")):null;return a.a.createElement("div",{className:"timer-text"},a.a.createElement("div",{style:t,id:"bigBox"}),a.a.createElement("h3",{style:{flex:"0 0 auto",fontSize:"4.5em"}}," ",T()(this.state.time).format("mm m ss s")," "),i,l,u||m,r,o)}}]),t}(a.a.Component),S=n(102),E=n(184),w=n(95),O=n(181),j=n(94),I=(n(115),n(37)),R=(n(162),n(12)),N=n.n(R),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).timeName="name",n.timeGreenId="timeGreen",n.timeYellowId="timeYellow",n.timeRedId="timeRed",n.timeVibrateId="timeVibrate",n.state={nameText:n.props.timerConfiguration.name,canEditName:!0},n.onRunClicked=n.onRunClicked.bind(Object(u.a)(n)),n.onDeleteClicked=n.onDeleteClicked.bind(Object(u.a)(n)),n.onTimePickerChanged=n.onTimePickerChanged.bind(Object(u.a)(n)),n.onNameEditClicked=n.onNameEditClicked.bind(Object(u.a)(n)),n.onNameSaveClicked=n.onNameSaveClicked.bind(Object(u.a)(n)),n.onNameChanged=n.onNameChanged.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(this.props.onInitialRun){var e=this.props.timerConfiguration,t=e.name,n=e.green,i=e.yellow,a=e.red,r=e.vibrate;this.props.onInitialRun({name:t,green:n,yellow:i,red:a,vibrate:r})}}},{key:"componentDidUpdate",value:function(e){e.timerConfiguration.name!==this.props.timerConfiguration.name&&this.setState({nameText:this.props.timerConfiguration.name})}},{key:"onRunClicked",value:function(){this.props.handleSelect(this.props.id)}},{key:"onDeleteClicked",value:function(){this.props.handleDelete(this.props.id)}},{key:"convertTimeToMs",value:function(e){var t=e.split(":");try{return e?1e3*(60*parseInt(t[0])+parseInt(t[1])):this.convertTimeToMs(N()("2017-11-27T00:00:00"))}catch(n){return null}}},{key:"onTimePickerChanged",value:function(e,t){var n=this.convertTimeToMs(e.value),i=new M(this.state.nameText,t===this.timeGreenId?n:this.props.timerConfiguration.green,t===this.timeYellowId?n:this.props.timerConfiguration.yellow,t===this.timeRedId?n:this.props.timerConfiguration.red,t===this.timeVibrateId?n:this.props.timerConfiguration.vibrate);this.props.onTimerConfigurationChanged(this.props.id,i)}},{key:"msToMinutesAndSeconds",value:function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return N()("2017-11-27T00:"+(t<10?"0":"")+t+":"+(n<10?"0":"")+n)}},{key:"onNameEditClicked",value:function(){this.setState({canEditName:!1});var e=document.getElementById("nameTextBox".concat(this.props.id));e.focus(),e.select()}},{key:"onNameSaveClicked",value:function(e){var t=new M(e.value,this.props.timerConfiguration.green,this.props.timerConfiguration.yellow,this.props.timerConfiguration.red,this.props.timerConfiguration.vibrate);this.props.onTimerConfigurationChanged(this.props.id,t),this.setState({canEditName:!0})}},{key:"onNameChanged",value:function(e){this.setState({nameText:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.timerConfiguration;return a.a.createElement("div",null,a.a.createElement(E.a,{id:"form".concat(this.props.id)},a.a.createElement(E.a.Row,null,a.a.createElement(E.a.Group,{as:w.a,className:"timer-name-group"},a.a.createElement(O.a,{size:"sm",className:"mb-3"},a.a.createElement(j.a,{id:"nameTextBox".concat(this.props.id),value:this.state.nameText,"aria-label":"Timer name","aria-describedby":"basic-addon2",type:"text",readOnly:this.state.canEditName,className:"timer-name".concat(this.props.id),onChange:function(t){return e.onNameChanged(t)}}),a.a.createElement(O.a.Append,null,this.state.canEditName?a.a.createElement(v.a,{onClick:this.onNameEditClicked,variant:"outline-secondary"},"Edit"):a.a.createElement(v.a,{onClick:function(t){return e.onNameSaveClicked(document.querySelector(".timer-name".concat(e.props.id)))},variant:"outline-secondary"},"Save")))),a.a.createElement(w.a,null)),a.a.createElement(E.a.Row,null,a.a.createElement(E.a.Group,{as:w.a,controlId:"formGreen"},a.a.createElement(E.a.Label,null,"Green"),a.a.createElement(I.a,{id:this.timeGreenId,onClose:function(t){return e.onTimePickerChanged(document.querySelector(".rc-time-picker-panel-input"),e.timeGreenId)},showTime:{format:"mm:ss"},showHour:!1,format:"mm:ss",secondStep:15,value:this.msToMinutesAndSeconds(t.green)||N()("2017-11-27T00:05:00")})),a.a.createElement(E.a.Group,{as:w.a,controlId:"formYellow"},a.a.createElement(E.a.Label,null,"Yellow"),a.a.createElement(I.a,{id:this.timeYellowId,onClose:function(t){return e.onTimePickerChanged(document.querySelector(".rc-time-picker-panel-input"),e.timeYellowId)},showTime:{format:"mm:ss"},showHour:!1,format:"mm:ss",secondStep:15,value:this.msToMinutesAndSeconds(t.yellow)||N()("2017-11-27T00:06:00")})),a.a.createElement(E.a.Group,{as:w.a,controlId:"formRed"},a.a.createElement(E.a.Label,null,"Red"),a.a.createElement(I.a,{id:this.timeRedId,onClose:function(t){return e.onTimePickerChanged(document.querySelector(".rc-time-picker-panel-input"),e.timeRedId)},showTime:{format:"mm:ss"},showHour:!1,format:"mm:ss",secondStep:15,value:this.msToMinutesAndSeconds(t.red)||N()("2017-11-27T00:07:00")})),a.a.createElement(E.a.Group,{as:w.a,controlId:"formVibrateDelay",hidden:!0},a.a.createElement(E.a.Label,null,"Late Interval"),a.a.createElement(I.a,{id:this.timeVibrateId,onClose:function(t){return e.onTimePickerChanged(document.querySelector(".rc-time-picker-panel-input"),e.timeVibrateId)},showTime:{format:"ss"},showHour:!1,showMinute:!1,format:"ss",secondStep:5,value:this.msToMinutesAndSeconds(t.vibrate)||N()("2017-11-27T00:00:30")}))),a.a.createElement("div",{className:"form-button-container"},a.a.createElement(v.a,{variant:"primary",onClick:this.onDeleteClicked},"Delete"),a.a.createElement(v.a,{variant:"primary",onClick:this.onRunClicked},"Run"))))}}]),t}(a.a.Component),x=n(96),A=n.n(x),D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={timerPanels:[]},n.onTimerRunClicked=n.onTimerRunClicked.bind(Object(u.a)(n)),n.onTimerPanelDelete=n.onTimerPanelDelete.bind(Object(u.a)(n)),n.onTimerConfigurationChanged=n.onTimerConfigurationChanged.bind(Object(u.a)(n)),n.onAddNewTimerPanelClicked=n.onAddNewTimerPanelClicked.bind(Object(u.a)(n)),n.onTimerConfigSave=n.onTimerConfigSave.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(localStorage.getItem("timerSetting")){var e=JSON.parse(localStorage.getItem("timerSetting"));this.setState({timerPanels:e})}else this.setState({timerPanels:[new M("default"+this.state.timerPanels.length)]})}},{key:"onAddNewTimerPanelClicked",value:function(e){this.setState({timerPanels:this.state.timerPanels.concat([new M("default"+this.state.timerPanels.length)])})}},{key:"onTimerConfigurationChanged",value:function(e,t){this.setState(function(n){var i=Object(S.a)(n.timerPanels).slice(0);return i[e]=t,{timerPanels:i}})}},{key:"onTimerRunClicked",value:function(e){var t=this.state.timerPanels[e],n=t.name,i=t.green,a=t.yellow,r=t.red,o=t.vibrate;this.props.onRunClick({name:n,green:i,yellow:a,red:r,vibrate:o})}},{key:"onTimerPanelDelete",value:function(e){var t=this.state.timerPanels.filter(function(t,n){return n!==e});this.setState({timerPanels:t})}},{key:"onTimerConfigSave",value:function(){localStorage.setItem("timerSetting",JSON.stringify(this.state.timerPanels))}},{key:"exportToJsonFile",value:function(){var e=localStorage.getItem("timerSetting"),t="data:application/json;charset=utf-8,".concat(encodeURIComponent(e)),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","timer_setting.json"),n.click()}},{key:"importToJsonFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e[0]),n.onload=function(e){var n=JSON.parse(e.target.result);t.setState({timerPanels:n})}}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("div",{className:"form-button-container"},a.a.createElement(v.a,{onClick:this.onTimerConfigSave},"Save"),a.a.createElement(v.a,{onClick:this.exportToJsonFile},"Export"),a.a.createElement(A.a,{handleFiles:this.importToJsonFile,fileTypes:[".json"]},a.a.createElement(v.a,{className:"btn"},"Import"))),a.a.createElement("div",{className:"panel-wrapper"},this.state.timerPanels.map(function(t,n){return a.a.createElement(P,Object.assign({},e.props,{timerConfiguration:t,id:n,key:n,onTimerConfigurationChanged:e.onTimerConfigurationChanged,handleSelect:e.onTimerRunClicked,handleDelete:e.onTimerPanelDelete}))})),a.a.createElement("div",{className:"form-button-container"},a.a.createElement(v.a,{onClick:this.onAddNewTimerPanelClicked},"Add new")))}}]),t}(a.a.Component),M=function e(t,n,i,a,r){Object(l.a)(this,e),this.name=t||"default",this.green=n||3e5,this.yellow=i||36e4,this.red=a||42e4,this.vibrate=r||3e4},G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this))).state={activeTab:"setting",green:null,yellow:null,red:null,vibrate:null},n.handleTimerSelect=n.handleTimerSelect.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleTimerSelect",value:function(e){this.setState({green:e.green,yellow:e.yellow,red:e.red,vibrate:e.vibrate,activeTab:"timer"})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement(h.a,{activeKey:this.state.activeTab,defaultActiveKey:"setting",onSelect:function(t,n){e.setState({activeTab:t})},id:"uncontrolled-tab-example"},a.a.createElement(p.a,{eventKey:"setting",title:"Setting"},a.a.createElement(D,{onRunClick:this.handleTimerSelect})),a.a.createElement(p.a,{eventKey:"timer",title:"Timer"},a.a.createElement(y,{greenTime:this.state.green,yellowTime:this.state.yellow,redTime:this.state.red,vibrateTime:this.state.vibrate}))))}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},39:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.fdaed80c.chunk.js.map
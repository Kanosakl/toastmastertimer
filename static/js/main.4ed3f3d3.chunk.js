(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){e.exports=n(174)},107:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(6),l=n.n(r),s=(n(107),n(17)),o=n(21),m=n(24),c=n(22),u=n(7),h=n(23),d=(n(25),n(179)),v=n(178),b=(n(54),n(52)),f=n.n(b),p=n(100),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).state={time:0,start:0,isRunning:!1,colorBox:null,startTime:null,endTime:null,greenTime:null,redTime:null},n.startTimer=n.startTimer.bind(Object(u.a)(n)),n.stopTimer=n.stopTimer.bind(Object(u.a)(n)),n.resetTimer=n.resetTimer.bind(Object(u.a)(n)),n.greenAlert=null,n.yellowAlert=null,n.redAlert=null,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"startTimer",value:function(){var e=this;this.setState({time:this.state.time,start:Date.now()-this.state.time,isRunning:!0,startTime:new Date}),this.timerTick=setInterval(function(){return e.setState({time:Date.now()-e.state.start})},1e3),this.greenAlert=setTimeout(function(){e.vibrate(2e3),e.setColor("green")},this.props.greenTime),this.yellowAlert=setTimeout(function(){e.vibrate(2e3),e.setColor("yellow")},this.props.yellowTime),this.redAlert=setTimeout(function(){e.vibrate(2e3),e.alertLoop(),e.setColor("red")},this.props.redTime)}},{key:"alertLoop",value:function(){var e=this;this.intervalVibrate=setInterval(function(){return e.vibrate(2e3)},3e4)}},{key:"stopTimer",value:function(){this.setState({isRunning:!1,endTime:Date.now(),greenTime:this.props.greenTime,redTime:this.props.redTime}),clearInterval(this.timerTick),clearInterval(this.intervalVibrate),clearTimeout(this.greenAlert),clearTimeout(this.yellowAlert),clearTimeout(this.redAlert)}},{key:"resetTimer",value:function(){this.setState({time:0,greenTime:null,redTime:null}),this.setColor(null)}},{key:"vibrate",value:function(e){navigator.vibrate?navigator.vibrate(e):console.log("vibrating for ".concat(e,"ms"))}},{key:"setColor",value:function(e){this.setState({colorBox:e})}},{key:"render",value:function(){var e=Object(p.a)("%H : %M"),t={height:"250px",backgroundColor:this.state.colorBox,display:"flex"},n={height:"110px",width:"100%",bottom:"30px",position:"absolute"};this.state.colorBox&&(t.backgroundColor=this.state.colorBox);var a=0===this.state.time?i.a.createElement("button",{style:n,onClick:this.startTimer},"start"):null,r=this.state.isRunning?i.a.createElement("button",{style:n,onClick:this.stopTimer},"stop"):null,l=0===this.state.time||this.state.isRunning?null:i.a.createElement("button",{style:n,onClick:this.resetTimer},"reset"),s=0===this.state.time||this.state.isRunning?null:i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",null,"Start Time: ",e(this.state.startTime))),i.a.createElement("div",null,i.a.createElement("span",null,"End Time: ",e(this.state.endTime)))),o=this.state.greenTime||this.props.greenTime,m=0!==this.state.time&&!this.state.isRunning&&this.state.time<o?i.a.createElement("span",null,"UnderTime: ",f()(o-this.state.time).format("mm m ss s")):null,c=this.state.redTime||this.props.redTime,u=0!==this.state.time&&!this.state.isRunning&&this.state.time>c?i.a.createElement("span",null,"OverTime: ",f()(this.state.time-c).format("mm m ss s")):null;return i.a.createElement("div",{className:"timer-text"},i.a.createElement("div",{style:t,id:"bigBox"}),i.a.createElement("h3",{style:{flex:"0 0 auto",fontSize:"4.5em"}}," ",f()(this.state.time).format("mm m ss s")," "),a,s,u||m,r,l)}}]),t}(i.a.Component),T=n(101),E=n(180),y=n(94),w=n(176),C=n(93),k=n(177),S=(n(111),n(38)),O=(n(158),n(12)),j=n.n(O),I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).timeName="name",n.timeGreenId="timeGreen",n.timeYellowId="timeYellow",n.timeRedId="timeRed",n.timeVibrateId="timeVibrate",n.state={canEditName:!0},n.handleSelect=n.handleSelect.bind(Object(u.a)(n)),n.handleDelete=n.handleDelete.bind(Object(u.a)(n)),n.handleOnTimePickerChange=n.handleOnTimePickerChange.bind(Object(u.a)(n)),n.handleNameEdit=n.handleNameEdit.bind(Object(u.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(this.props.onInitialRun){var e=this.props.timerConfiguration,t=e.name,n=e.green,a=e.yellow,i=e.red,r=e.vibrate;this.props.onInitialRun({name:t,green:n,yellow:a,red:i,vibrate:r})}}},{key:"handleSelect",value:function(){this.props.handleSelect(this.props.id)}},{key:"handleDelete",value:function(){this.props.handleDelete(this.props.id)}},{key:"convertTimeToMs",value:function(e){try{return e?1e3*(60*e.minutes()+e.seconds()):this.convertTimeToMs(j()("2017-11-27T00:00:00"))}catch(t){return null}}},{key:"handleOnTimePickerChange",value:function(e,t){var n=this.convertTimeToMs(e),a=new A(t===this.timeName?e.target.value:this.props.timerConfiguration.name,t===this.timeGreenId?n:this.props.timerConfiguration.green,t===this.timeYellowId?n:this.props.timerConfiguration.yellow,t===this.timeRedId?n:this.props.timerConfiguration.red,t===this.timeVibrateId?n:this.props.timerConfiguration.vibrate);this.props.onTimerConfigurationChanged(this.props.id,a)}},{key:"millisToMinutesAndSeconds",value:function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return j()("2017-11-27T00:"+(t<10?"0":"")+t+":"+(n<10?"0":"")+n)}},{key:"handleNameEdit",value:function(){this.setState({canEditName:!0!==this.state.canEditName})}},{key:"render",value:function(){var e=this,t=this.props.timerConfiguration;return i.a.createElement("div",null,i.a.createElement(E.a,null,i.a.createElement(E.a.Row,null,i.a.createElement(E.a.Group,{as:y.a,className:"timer-name-group"},i.a.createElement(w.a,{size:"sm",className:"mb-3"},i.a.createElement(C.a,{id:this.timeName,value:t.name,"aria-label":"Timer name","aria-describedby":"basic-addon2",type:"text",readOnly:this.state.canEditName,onChange:function(t){return e.handleOnTimePickerChange(t,e.timeName)},className:"timer-name"}),i.a.createElement(w.a.Append,null,i.a.createElement(k.a,{onClick:this.handleNameEdit,variant:"outline-secondary"},this.state.canEditName?"Edit":"Save")))),i.a.createElement(y.a,null)),i.a.createElement(E.a.Row,null,i.a.createElement(E.a.Group,{as:y.a,controlId:"formGreen"},i.a.createElement(E.a.Label,null,"Green"),i.a.createElement(S.a,{id:this.timeGreenId,onChange:function(t){return e.handleOnTimePickerChange(t,e.timeGreenId)},showTime:{format:"mm:ss"},showHour:!1,format:"mm:ss",secondStep:15,value:this.millisToMinutesAndSeconds(t.green)||j()("2017-11-27T00:05:00")})),i.a.createElement(E.a.Group,{as:y.a,controlId:"formYellow"},i.a.createElement(E.a.Label,null,"Yellow"),i.a.createElement(S.a,{id:this.timeYellowId,onChange:function(t){return e.handleOnTimePickerChange(t,e.timeYellowId)},showTime:{format:"mm:ss"},showHour:!1,format:"mm:ss",secondStep:15,value:this.millisToMinutesAndSeconds(t.yellow)||j()("2017-11-27T00:06:00")})),i.a.createElement(E.a.Group,{as:y.a,controlId:"formRed"},i.a.createElement(E.a.Label,null,"Red"),i.a.createElement(S.a,{id:this.timeRedId,onChange:function(t){return e.handleOnTimePickerChange(t,e.timeRedId)},showTime:{format:"mm:ss"},showHour:!1,format:"mm:ss",secondStep:15,value:this.millisToMinutesAndSeconds(t.red)||j()("2017-11-27T00:07:00")})),i.a.createElement(E.a.Group,{as:y.a,controlId:"formVibrateDelay",hidden:!0},i.a.createElement(E.a.Label,null,"Late Interval"),i.a.createElement(S.a,{id:this.timeVibrateId,onChange:function(t){return e.handleOnTimePickerChange(t,e.timeVibrateId)},showTime:{format:"ss"},showHour:!1,showMinute:!1,format:"ss",secondStep:5,value:this.millisToMinutesAndSeconds(t.vibrate)||j()("2017-11-27T00:00:30")}))),i.a.createElement("div",{className:"form-button-container"},i.a.createElement(k.a,{variant:"primary",onClick:this.handleDelete},"Delete"),i.a.createElement(k.a,{variant:"primary",onClick:this.handleSelect},"Run"))))}}]),t}(i.a.Component),N=n(95),R=n.n(N),P=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this,e))).importToJsonFile=function(e){var t=new FileReader;t.readAsText(e[0]),t.onload=function(e){var t=JSON.parse(e.target.result);n.setState({timerPanels:t})}},n.state={timerPanels:[]},n.handleSelect=n.handleSelect.bind(Object(u.a)(n)),n.handleDelete=n.handleDelete.bind(Object(u.a)(n)),n.handleTimerConfigurationChanged=n.handleTimerConfigurationChanged.bind(Object(u.a)(n)),n.handleClick=n.handleClick.bind(Object(u.a)(n)),n.handleTimerConfigSave=n.handleTimerConfigSave.bind(Object(u.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(localStorage.getItem("timerSetting")){var e=JSON.parse(localStorage.getItem("timerSetting"));this.setState({timerPanels:e})}else this.setState({timerPanels:[new A("default"+this.state.timerPanels.length)]})}},{key:"handleClick",value:function(e){this.setState({timerPanels:this.state.timerPanels.concat([new A("default"+this.state.timerPanels.length)])})}},{key:"handleTimerConfigurationChanged",value:function(e,t){this.setState(function(n){var a=Object(T.a)(n.timerPanels).slice(0);return a[e]=t,{timerPanels:a}})}},{key:"handleSelect",value:function(e){var t=this.state.timerPanels[e],n=t.name,a=t.green,i=t.yellow,r=t.red,l=t.vibrate;this.props.onRunClick({name:n,green:a,yellow:i,red:r,vibrate:l})}},{key:"handleDelete",value:function(e){var t=this.state.timerPanels.filter(function(t,n){return n!==e});this.setState({timerPanels:t})}},{key:"handleTimerConfigSave",value:function(){localStorage.setItem("timerSetting",JSON.stringify(this.state.timerPanels))}},{key:"exportToJsonFile",value:function(){var e=localStorage.getItem("timerSetting"),t="data:application/json;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","timer_setting.json"),n.click()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"form-button-container"},i.a.createElement(k.a,{onClick:this.handleTimerConfigSave},"Save"),i.a.createElement(k.a,{onClick:this.exportToJsonFile},"Export"),i.a.createElement(R.a,{handleFiles:this.importToJsonFile,fileTypes:[".json"]},i.a.createElement(k.a,{className:"btn"},"Import"))),i.a.createElement("div",{className:"panel-wrapper"},this.state.timerPanels.map(function(t,n){return i.a.createElement(I,Object.assign({},e.props,{timerConfiguration:t,id:n,key:n,onTimerConfigurationChanged:e.handleTimerConfigurationChanged,handleSelect:e.handleSelect,handleDelete:e.handleDelete}))})),i.a.createElement("div",{className:"form-button-container"},i.a.createElement(k.a,{onClick:this.handleClick},"Add new")))}}]),t}(i.a.Component),A=function e(t,n,a,i,r){Object(s.a)(this,e),this.name=t||"default",this.green=n||3e5,this.yellow=a||36e4,this.red=i||42e4,this.vibrate=r||3e4},x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(c.a)(t).call(this))).state={activeTab:"setting",green:null,yellow:null,red:null,vibrate:null},n.handleSelect=n.handleSelect.bind(Object(u.a)(n)),n.handleTimerSelect=n.handleTimerSelect.bind(Object(u.a)(n)),n.onUnload=n.onUnload.bind(Object(u.a)(n)),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"onUnload",value:function(e){console.log("hellooww"),e.returnValue="Hellooww"}},{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"handleSelect",value:function(e){this.setState({})}},{key:"handleTimerSelect",value:function(e){this.setState({green:e.green,yellow:e.yellow,red:e.red,vibrate:e.vibrate,activeTab:"timer"})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement(d.a,{activeKey:this.state.activeTab,defaultActiveKey:"setting",onSelect:function(t,n){e.setState({activeTab:t})},id:"uncontrolled-tab-example"},i.a.createElement(v.a,{eventKey:"setting",title:"Setting"},i.a.createElement(P,{onRunClick:this.handleTimerSelect})),i.a.createElement(v.a,{eventKey:"timer",title:"Timer"},i.a.createElement(g,{greenTime:this.state.green,yellowTime:this.state.yellow,redTime:this.state.red,vibrateTime:this.state.vibrate}))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.4ed3f3d3.chunk.js.map